def all_india_data(request):
    # if request.method =='POST':
    selected_date = "2024-01-28"

    all_india_data  = all_india_analytics.objects.filter(date=selected_date)
    print(all_india_data)

    block = [item.block for item in all_india_data]
    india_demand = [item.all_india_demand for item in all_india_data]
    buy = [item.buy for item in all_india_data]
    sell = [item.sell for item in all_india_data]

    data = {
    'block': block,
    'india_demand': india_demand,
    'buy': buy,
    'sell': sell,
    }

        if 'json' in request.GET.get('format', ''):
        # JSON response requested
        return JsonResponse(data)
    else:
        # HTML rendering
        return render(request, 'your_template.html', {'chart_data': data})
